{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\WebstormProjects\\\\chat\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport io from \"socket.io-client\";\nimport { v4 } from \"uuid\";\nimport './App.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PORT = 3001;\nconst socket = io(`localhost:${PORT}`);\nfunction App() {\n  _s();\n  const [isConnected, setIsConnected] = useState(socket.connected);\n  const [newMessage, setNewMessage] = useState(\"\");\n  const [user, setUser] = useState(\"\");\n  const [room, setRoom] = useState(\"\");\n  const [chatVisible, setChatVisible] = useState(false);\n  const [messages, setMessages] = useState([]);\n  useEffect(() => {\n    console.log('connected:', socket.connected);\n    socket.on('connect', () => {\n      setIsConnected(true);\n    });\n    socket.on('disconnect', () => {\n      setIsConnected(false);\n    });\n    return () => {\n      socket.off('connect');\n      socket.off('disconnect');\n    };\n  }, [isConnected]);\n  useEffect(() => {\n    socket.on('receive_msg', ({\n      user,\n      message\n    }) => {\n      const msg = `${user}: ${message}`;\n      setMessages(prevState => [msg, ...prevState]);\n    });\n    return () => {\n      socket.off('receive_msg');\n    };\n  }, []);\n  const handleEnterChatRoom = () => {\n    if (user !== '' && room !== '') {\n      setChatVisible(true);\n      socket.emit('join_room', {\n        user,\n        room\n      });\n    }\n  };\n  const handleSendMessage = () => {\n    const newMsgData = {\n      room: room,\n      user: user,\n      message: newMessage\n    };\n    socket.emit('send_message', newMsgData);\n    const msg = `${user}: ${newMessage}`;\n    setMessages(prevState => [msg, ...prevState]);\n    setNewMessage(\"\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-app\",\n    children: !chatVisible ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Entra a un chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        className: \"input-entrada\",\n        placeholder: \"user\",\n        value: user,\n        onChange: e => setUser(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        className: \"input-entrada\",\n        placeholder: \"room\",\n        value: room,\n        onChange: e => setRoom(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button button-enter\",\n        onClick: handleEnterChatRoom,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Enter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Room: \", room, \" | User: \", user]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-message\",\n        children: messages.map(el => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message\",\n          children: el\n        }, v4(), false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 45\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"message\",\n        value: newMessage,\n        onChange: e => setNewMessage(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button button-send\",\n        onClick: handleSendMessage,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Send message\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 9\n  }, this);\n}\n_s(App, \"2NQUk3DSKPaBDSlDHbPqzRqNCjQ=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","io","v4","jsxDEV","_jsxDEV","Fragment","_Fragment","PORT","socket","App","_s","isConnected","setIsConnected","connected","newMessage","setNewMessage","user","setUser","room","setRoom","chatVisible","setChatVisible","messages","setMessages","console","log","on","off","message","msg","prevState","handleEnterChatRoom","emit","handleSendMessage","newMsgData","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","onClick","map","el","_c","$RefreshReg$"],"sources":["C:/Users/HP/WebstormProjects/chat/frontend/src/App.js"],"sourcesContent":["import {useEffect, useState} from \"react\";\nimport io from \"socket.io-client\";\nimport {v4} from \"uuid\";\nimport './App.css'\n\nconst PORT = 3001;\nconst socket = io(`localhost:${PORT}`);\n\nfunction App() {\n\n    const [isConnected, setIsConnected] = useState(socket.connected);\n    const [newMessage, setNewMessage] = useState(\"\");\n    const [user, setUser] = useState(\"\");\n    const [room, setRoom] = useState(\"\");\n    const [chatVisible, setChatVisible] = useState(false);\n    const [messages, setMessages] = useState([]);\n\n    useEffect(() => {\n        console.log('connected:', socket.connected)\n\n        socket.on('connect', () => {\n            setIsConnected(true);\n        });\n\n        socket.on('disconnect', () => {\n            setIsConnected(false);\n        });\n\n        return () => {\n            socket.off('connect');\n            socket.off('disconnect');\n        }\n    }, [isConnected]);\n\n    useEffect(() => {\n        socket.on('receive_msg', ({user, message}) => {\n            const msg = `${user}: ${message}`;\n            setMessages(prevState => [msg, ...prevState]);\n        });\n\n        return () => {\n            socket.off('receive_msg');\n        };\n\n    }, [])\n\n    const handleEnterChatRoom = () => {\n        if (user !== '' && room !== '') {\n            setChatVisible(true)\n            socket.emit('join_room', {user, room});\n        }\n    }\n\n    const handleSendMessage = () => {\n        const newMsgData = {\n            room: room,\n            user: user,\n            message: newMessage,\n        }\n\n        socket.emit('send_message', newMsgData)\n        const msg = `${user}: ${newMessage}`\n        setMessages(prevState => [msg, ...prevState]);\n        setNewMessage(\"\")\n    }\n\n    return (\n        <div className='container-app'>\n            {!chatVisible ?\n                <>\n                    <h3>Entra a un chat</h3>\n                    <input type=\"text\" className=\"input-entrada\" placeholder=\"user\" value={user}\n                           onChange={e => setUser(e.target.value)}/>\n                    <br/>\n                    <input type=\"text\" className=\"input-entrada\" placeholder=\"room\" value={room}\n                           onChange={e => setRoom(e.target.value)}/>\n                    <br/>\n                    <button className='button button-enter' onClick={handleEnterChatRoom}>\n                        <span>Enter</span>\n                    </button>\n                </>\n                :\n                <>\n                    <h3>Room: {room} | User: {user}</h3>\n                    <div className='container-message'>\n                        {messages.map(el => <div key={v4()} className='message'>{el}</div>)}\n                    </div>\n                    <input type=\"text\"\n                           placeholder=\"message\"\n                           value={newMessage}\n                           onChange={e => setNewMessage(e.target.value)}\n                    />\n                    <button className='button button-send' onClick={handleSendMessage}>\n                        <span>Send message</span>\n                    </button>\n                </>\n            }\n        </div>\n    )\n}\n\nexport default App;\n"],"mappings":";;AAAA,SAAQA,SAAS,EAAEC,QAAQ,QAAO,OAAO;AACzC,OAAOC,EAAE,MAAM,kBAAkB;AACjC,SAAQC,EAAE,QAAO,MAAM;AACvB,OAAO,WAAW;AAAA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAElB,MAAMC,IAAI,GAAG,IAAI;AACjB,MAAMC,MAAM,GAAGP,EAAE,CAAC,aAAaM,IAAI,EAAE,CAAC;AAEtC,SAASE,GAAGA,CAAA,EAAG;EAAAC,EAAA;EAEX,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGZ,QAAQ,CAACQ,MAAM,CAACK,SAAS,CAAC;EAChE,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACgB,IAAI,EAAEC,OAAO,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACkB,IAAI,EAAEC,OAAO,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACoB,WAAW,EAAEC,cAAc,CAAC,GAAGrB,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACsB,QAAQ,EAAEC,WAAW,CAAC,GAAGvB,QAAQ,CAAC,EAAE,CAAC;EAE5CD,SAAS,CAAC,MAAM;IACZyB,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEjB,MAAM,CAACK,SAAS,CAAC;IAE3CL,MAAM,CAACkB,EAAE,CAAC,SAAS,EAAE,MAAM;MACvBd,cAAc,CAAC,IAAI,CAAC;IACxB,CAAC,CAAC;IAEFJ,MAAM,CAACkB,EAAE,CAAC,YAAY,EAAE,MAAM;MAC1Bd,cAAc,CAAC,KAAK,CAAC;IACzB,CAAC,CAAC;IAEF,OAAO,MAAM;MACTJ,MAAM,CAACmB,GAAG,CAAC,SAAS,CAAC;MACrBnB,MAAM,CAACmB,GAAG,CAAC,YAAY,CAAC;IAC5B,CAAC;EACL,CAAC,EAAE,CAAChB,WAAW,CAAC,CAAC;EAEjBZ,SAAS,CAAC,MAAM;IACZS,MAAM,CAACkB,EAAE,CAAC,aAAa,EAAE,CAAC;MAACV,IAAI;MAAEY;IAAO,CAAC,KAAK;MAC1C,MAAMC,GAAG,GAAG,GAAGb,IAAI,KAAKY,OAAO,EAAE;MACjCL,WAAW,CAACO,SAAS,IAAI,CAACD,GAAG,EAAE,GAAGC,SAAS,CAAC,CAAC;IACjD,CAAC,CAAC;IAEF,OAAO,MAAM;MACTtB,MAAM,CAACmB,GAAG,CAAC,aAAa,CAAC;IAC7B,CAAC;EAEL,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMI,mBAAmB,GAAGA,CAAA,KAAM;IAC9B,IAAIf,IAAI,KAAK,EAAE,IAAIE,IAAI,KAAK,EAAE,EAAE;MAC5BG,cAAc,CAAC,IAAI,CAAC;MACpBb,MAAM,CAACwB,IAAI,CAAC,WAAW,EAAE;QAAChB,IAAI;QAAEE;MAAI,CAAC,CAAC;IAC1C;EACJ,CAAC;EAED,MAAMe,iBAAiB,GAAGA,CAAA,KAAM;IAC5B,MAAMC,UAAU,GAAG;MACfhB,IAAI,EAAEA,IAAI;MACVF,IAAI,EAAEA,IAAI;MACVY,OAAO,EAAEd;IACb,CAAC;IAEDN,MAAM,CAACwB,IAAI,CAAC,cAAc,EAAEE,UAAU,CAAC;IACvC,MAAML,GAAG,GAAG,GAAGb,IAAI,KAAKF,UAAU,EAAE;IACpCS,WAAW,CAACO,SAAS,IAAI,CAACD,GAAG,EAAE,GAAGC,SAAS,CAAC,CAAC;IAC7Cf,aAAa,CAAC,EAAE,CAAC;EACrB,CAAC;EAED,oBACIX,OAAA;IAAK+B,SAAS,EAAC,eAAe;IAAAC,QAAA,EACzB,CAAChB,WAAW,gBACThB,OAAA,CAAAE,SAAA;MAAA8B,QAAA,gBACIhC,OAAA;QAAAgC,QAAA,EAAI;MAAe;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACxBpC,OAAA;QAAOqC,IAAI,EAAC,MAAM;QAACN,SAAS,EAAC,eAAe;QAACO,WAAW,EAAC,MAAM;QAACC,KAAK,EAAE3B,IAAK;QACrE4B,QAAQ,EAAEC,CAAC,IAAI5B,OAAO,CAAC4B,CAAC,CAACC,MAAM,CAACH,KAAK;MAAE;QAAAN,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC,eAChDpC,OAAA;QAAAiC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACLpC,OAAA;QAAOqC,IAAI,EAAC,MAAM;QAACN,SAAS,EAAC,eAAe;QAACO,WAAW,EAAC,MAAM;QAACC,KAAK,EAAEzB,IAAK;QACrE0B,QAAQ,EAAEC,CAAC,IAAI1B,OAAO,CAAC0B,CAAC,CAACC,MAAM,CAACH,KAAK;MAAE;QAAAN,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC,eAChDpC,OAAA;QAAAiC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACLpC,OAAA;QAAQ+B,SAAS,EAAC,qBAAqB;QAACY,OAAO,EAAEhB,mBAAoB;QAAAK,QAAA,eACjEhC,OAAA;UAAAgC,QAAA,EAAM;QAAK;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACd,CAAC;IAAA,eACX,CAAC,gBAEHpC,OAAA,CAAAE,SAAA;MAAA8B,QAAA,gBACIhC,OAAA;QAAAgC,QAAA,GAAI,QAAM,EAAClB,IAAI,EAAC,WAAS,EAACF,IAAI;MAAA;QAAAqB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACpCpC,OAAA;QAAK+B,SAAS,EAAC,mBAAmB;QAAAC,QAAA,EAC7Bd,QAAQ,CAAC0B,GAAG,CAACC,EAAE,iBAAI7C,OAAA;UAAgB+B,SAAS,EAAC,SAAS;UAAAC,QAAA,EAAEa;QAAE,GAA7B/C,EAAE,CAAC,CAAC;UAAAmC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAA+B,CAAC;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAClE,CAAC,eACNpC,OAAA;QAAOqC,IAAI,EAAC,MAAM;QACXC,WAAW,EAAC,SAAS;QACrBC,KAAK,EAAE7B,UAAW;QAClB8B,QAAQ,EAAEC,CAAC,IAAI9B,aAAa,CAAC8B,CAAC,CAACC,MAAM,CAACH,KAAK;MAAE;QAAAN,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnD,CAAC,eACFpC,OAAA;QAAQ+B,SAAS,EAAC,oBAAoB;QAACY,OAAO,EAAEd,iBAAkB;QAAAG,QAAA,eAC9DhC,OAAA;UAAAgC,QAAA,EAAM;QAAY;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACrB,CAAC;IAAA,eACX;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAEN,CAAC;AAEd;AAAC9B,EAAA,CA3FQD,GAAG;AAAAyC,EAAA,GAAHzC,GAAG;AA6FZ,eAAeA,GAAG;AAAC,IAAAyC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}