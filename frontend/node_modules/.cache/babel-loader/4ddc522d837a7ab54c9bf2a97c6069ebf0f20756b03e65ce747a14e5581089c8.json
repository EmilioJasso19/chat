{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\WebstormProjects\\\\chat\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport io from \"socket.io-client\";\nimport { v4 } from \"uuid\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PORT = 3001;\nconst socket = io(`localhost:${PORT}`);\nfunction App() {\n  _s();\n  const [isConnected, setIsConnected] = useState(socket.connected);\n  const [newMessage, setNewMessage] = useState(\"\");\n  const [user, setUser] = useState(\"\");\n  const [room, setRoom] = useState(\"\");\n  const [chatVisible, setChatVisible] = useState(false);\n  const [messages, setMessages] = useState([]);\n  useEffect(() => {\n    console.log('connected:', socket.connected);\n    socket.on('connect', () => {\n      setIsConnected(true);\n    });\n    socket.on('disconnect', () => {\n      setIsConnected(false);\n    });\n    return () => {\n      socket.off('connect');\n      socket.off('disconnect');\n    };\n  }, [isConnected]);\n  useEffect(() => {\n    socket.on('receive_msg', ({\n      user,\n      message\n    }) => {\n      const msg = `${user} send: ${message}`;\n      setMessages(prevState => [msg, ...prevState]);\n    });\n  }, [socket]);\n  const handleEnterChatRoom = () => {\n    if (user !== '' && room !== '') {\n      setChatVisible(true);\n      socket.emit('join_room', {\n        user,\n        room\n      });\n    }\n  };\n  const handleSendMessage = () => {\n    const newMsgData = {\n      room: room,\n      user: user,\n      message: newMessage\n    };\n    socket.emit('send_message', newMsgData);\n    const msg = `${user} send: ${newMessage}`;\n    setMessages(prevState => [msg, ...prevState]);\n    setNewMessage(\"\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 20\n    },\n    children: !chatVisible ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"user\",\n        value: user,\n        onChange: e => setUser(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"room\",\n        value: room,\n        onChange: e => setRoom(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleEnterChatRoom,\n        children: \"Enter\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        children: [\"Room: \", room, \" | User: \", user]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          height: 200,\n          width: 250,\n          border: \"1px solid #000\",\n          overflowY: 'scroll',\n          marginBottom: 10,\n          padding: 10\n        },\n        children: messages.map(el => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: el\n        }, v4(), false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 45\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"message\",\n        value: newMessage,\n        onChange: e => setNewMessage(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSendMessage,\n        children: \"Send message\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n}\n_s(App, \"2NQUk3DSKPaBDSlDHbPqzRqNCjQ=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","io","v4","jsxDEV","_jsxDEV","Fragment","_Fragment","PORT","socket","App","_s","isConnected","setIsConnected","connected","newMessage","setNewMessage","user","setUser","room","setRoom","chatVisible","setChatVisible","messages","setMessages","console","log","on","off","message","msg","prevState","handleEnterChatRoom","emit","handleSendMessage","newMsgData","style","padding","children","type","placeholder","value","onChange","e","target","fileName","_jsxFileName","lineNumber","columnNumber","onClick","height","width","border","overflowY","marginBottom","map","el","_c","$RefreshReg$"],"sources":["C:/Users/HP/WebstormProjects/chat/frontend/src/App.js"],"sourcesContent":["import {useEffect, useState} from \"react\";\nimport io from \"socket.io-client\";\nimport {v4} from \"uuid\";\n\nconst PORT = 3001;\nconst socket = io(`localhost:${PORT}`);\n\nfunction App() {\n\n    const [isConnected, setIsConnected] = useState(socket.connected);\n    const [newMessage, setNewMessage] = useState(\"\");\n    const [user, setUser] = useState(\"\");\n    const [room, setRoom] = useState(\"\");\n    const [chatVisible, setChatVisible] = useState(false);\n    const [messages, setMessages] = useState([]);\n\n    useEffect(() => {\n        console.log('connected:', socket.connected)\n\n        socket.on('connect', () => {\n            setIsConnected(true);\n        });\n\n        socket.on('disconnect', () => {\n            setIsConnected(false);\n        });\n\n        return () => {\n            socket.off('connect');\n            socket.off('disconnect');\n        }\n    }, [isConnected]);\n\n    useEffect(() => {\n        socket.on('receive_msg', ({user, message}) => {\n            const msg = `${user} send: ${message}`;\n            setMessages(prevState => [msg, ...prevState]);\n        });\n    }, [socket])\n\n    const handleEnterChatRoom = () => {\n        if (user !== '' && room !== '') {\n            setChatVisible(true)\n            socket.emit('join_room', {user, room});\n        }\n    }\n\n    const handleSendMessage = () => {\n        const newMsgData = {\n            room: room,\n            user: user,\n            message: newMessage,\n        }\n\n        socket.emit('send_message', newMsgData)\n        const msg = `${user} send: ${newMessage}`\n        setMessages(prevState => [msg, ...prevState]);\n        setNewMessage(\"\")\n    }\n\n    return (\n        <div style={{padding: 20}}>\n            {!chatVisible ?\n                <>\n                    <input type=\"text\" placeholder=\"user\" value={user} onChange={e => setUser(e.target.value)}/>\n                    <br/>\n                    <input type=\"text\" placeholder=\"room\" value={room} onChange={e => setRoom(e.target.value)}/>\n                    <br/>\n                    <button onClick={handleEnterChatRoom}>Enter</button>\n                </>\n                :\n                <>\n                    <h5>Room: {room} | User: {user}</h5>\n                    <div style={{\n                        height: 200,\n                        width: 250,\n                        border: \"1px solid #000\",\n                        overflowY: 'scroll',\n                        marginBottom: 10,\n                        padding: 10,\n                    }}>\n                        {messages.map(el => <div key={v4()}>{el}</div>)}\n                    </div>\n                    <input type=\"text\"\n                           placeholder=\"message\"\n                           value={newMessage}\n                           onChange={e => setNewMessage(e.target.value)}\n                    />\n                    <button onClick={handleSendMessage}>Send message</button>\n                </>\n            }\n        </div>\n    )\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}